{
    // ╔══════════════════════════════════════════════════════════════════╗
    // ║   THE CHTHONIC ARCHIVE - VS Code Configuration                   ║
    // ║   ASC-NATIVE-CHAIN-RPG | Rust/Vulkan/Solana                      ║
    // ║   <69.96 Alpha Omega>                                            ║
    // ╚══════════════════════════════════════════════════════════════════╝

    // === RUST-ANALYZER CONFIGURATION ===
    // Note: 'clippy' with 'clippy::pedantic' is enabled for strict CI-level checks; consider switching to 'check' for day-to-day development if this is too noisy.
    "rust-analyzer.cargo.features": "all",
    "rust-analyzer.checkOnSave.command": "clippy",
    "rust-analyzer.checkOnSave.extraArgs": [
        "--",
        "-W",
        "clippy::pedantic"
    ],
    "rust-analyzer.inlayHints.chainingHints.enable": true,
    "rust-analyzer.inlayHints.typeHints.enable": true,
    "rust-analyzer.inlayHints.parameterHints.enable": true,
    "rust-analyzer.lens.enable": true,
    "rust-analyzer.lens.run.enable": true,
    "rust-analyzer.lens.debug.enable": true,
    "rust-analyzer.procMacro.enable": true,

    // === VULKAN/SHADER SUPPORT ===
    "files.associations": {
        "*.vert": "glsl",
        "*.frag": "glsl",
        "*.geom": "glsl",
        "*.comp": "glsl",
        "*.tesc": "glsl",
        "*.tese": "glsl",
        "*.spv": "binary",
        "*.md": "markdown",
        "*.json": "jsonc"
    },

    // === EDITOR SETTINGS ===
    // Formatting policy: prefer per-language formatters. Set global to false to avoid unexpected formatters running on save.
    "editor.formatOnSave": false,
    "editor.rulers": [100, 120],
    "editor.tabSize": 4,
    "editor.insertSpaces": true,
    "editor.semanticHighlighting.enabled": true,
    "editor.bracketPairColorization.enabled": true,
    "editor.guides.bracketPairs": true,
    "editor.tokenColorCustomizations": {
        "[Default Dark+]": {
            "textMateRules": []
        }
    },
    "workbench.colorTheme": "Chthonic Archive - Tetrahedral Resonance",

    // === FILE EXCLUSIONS (Performance) ===
    "files.exclude": {
        "**/target": true,
        "**/*.spv": false,
        "**/Cargo.lock": false
    },
    "files.watcherExclude": {
        "**/target/**": true
    },
    "search.exclude": {
        "**/target": true
    },

    // === TERMINAL ===
    // Crude mode: no profiles, no aliases, no wrapper functions, no activation scripts.
    // Terminals start with `-NoProfile` and get a deterministic PATH prefix via terminal.integrated.env.windows.
    // Shell integration enabled for command detection, working directory tracking, and decorations.
    "terminal.integrated.profiles.windows": {
        "Pwsh (Chthonic)": {
            "path": "C:\\Program Files\\PowerShell\\7\\pwsh.exe",
            "args": [
                "-NoProfile",
                "-NoExit"
            ]
        },
        "PowerShell (Chthonic)": {
            "source": "PowerShell",
            "args": [
                "-NoProfile",
                "-NoExit"
            ]
        }
    },
    "terminal.integrated.defaultProfile.windows": "Pwsh (Chthonic)",

    // Shell Integration Configuration (VSCode Insiders + PowerShell 7.5.4)
    // Shell integration script: c:\Users\erdno\AppData\Local\Programs\Microsoft VS Code Insiders\7c62052af6\resources\app\out\vs\workbench\contrib\terminal\common\scripts\shellIntegration.ps1
    "terminal.integrated.shellIntegration.enabled": true,
    "terminal.integrated.shellIntegration.decorationsEnabled": "both",
    "terminal.integrated.shellIntegration.showCommandGuide": true,
    "terminal.integrated.shellIntegration.history": 100,
    "terminal.integrated.suggest.enabled": true,
    "terminal.integrated.suggest.quickSuggestions": true,
    "terminal.integrated.suggest.suggestOnTriggerCharacters": true,
    "terminal.integrated.stickyScroll.enabled": true,

    // Prevent accidental WSL/bash launches (use explicit profile selection)
    "terminal.integrated.commandsToSkipShell": [
        "bash",
        "wsl",
        "ubuntu"
    ],
    "terminal.integrated.env.windows": {
        "PATH": "C:\\Windows\\System32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0;C:\\Program Files\\PowerShell\\7;C:\\Program Files\\GitHub CLI;${env:USERPROFILE}\\AppData\\Local\\Programs\\Microsoft VS Code Insiders\\bin;${env:USERPROFILE}\\AppData\\Local\\Microsoft\\WinGet\\Packages\\GitHub.Copilot.Prerelease_Microsoft.Winget.Source_8wekyb3d8bbwe;${env:USERPROFILE}\\AppData\\Local\\GitHubDesktop\\bin;${env:USERPROFILE}\\.local\\bin;${env:USERPROFILE}\\.bun\\bin;${env:USERPROFILE}\\.cargo\\bin;${workspaceFolder}\\scripts\\bin;C:\\Go\\bin;C:\\Ruby34-x64\\bin;C:\\Ruby34-x64\\msys64\\ucrt64\\bin;C:\\Program Files\\Git\\cmd;C:\\Program Files\\Git\\bin;C:\\Program Files\\Git\\usr\\bin",
        "RUST_BACKTRACE": "1",
        "RUST_LOG": "info,chthonic_archive=debug"
    },

    // === PYTHON (uv lanes policy) ===
    // Policy: latest stable lanes. Repo pins to `3.13` via `.python-version`; uv shims track latest patch within the lane.
    // Maintenance: `uv python upgrade 3.13 --reinstall`, `uv python upgrade 3.14 --reinstall`, then `uv python update-shell`.
    "python.defaultInterpreterPath": "${env:USERPROFILE}\\.local\\bin\\python3.13.exe",
    "python.terminal.activateEnvironment": false,

    // === DEBUG ===
    "lldb.showDisassembly": "auto",
    "lldb.dereferencePointers": true,
    "lldb.consoleMode": "commands",

    // === FORMATTING ===
    "[rust]": {
        "editor.formatOnSave": true
    },
    "[glsl]": {
        "editor.tabSize": 4,
        "editor.formatOnSave": false
    },
    "[toml]": {
        "editor.formatOnSave": false
    },
    "[markdown]": {
        "editor.wordWrap": "on",
        "editor.quickSuggestions": {
            "comments": "on",
            "strings": "on",
            "other": "on"
        },
        "editor.unicodeHighlight.ambiguousCharacters": false,
        "editor.unicodeHighlight.invisibleCharacters": false,
        "editor.formatOnSave": false
    },
    "[json]": {
        "editor.formatOnSave": false,
        "editor.defaultFormatter": "vscode.json-language-features"
    },
    "[jsonc]": {
        "editor.formatOnSave": false,
        "editor.defaultFormatter": "vscode.json-language-features"
    },

    // === MARKDOWN PREVIEW ===
    "markdown.preview.fontSize": 14,
    "markdown.preview.lineHeight": 1.6,
    "markdown.preview.fontFamily": "-apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif",
    "markdown.validate.enabled": true,
    "markdown.editor.pasteUrlAsFormattedLink.enabled": "smart",
    "chat.mcp.autostart": "newAndOutdated",
    "editor.maxTokenizationLineLength": 99999999999,

    // === COPILOT (Pro/Plus friendly defaults) ===
    "github.copilot.enable": {
        "*": true,
        "markdown": true,
        "github.copilot.inlineSuggest.enable": true,
        "github.copilot-chat.enable": true,
        "scminput": true,
        "plaintext": true
    },
    "chat.mcp.serverSampling": {
    "chthonic-archive/.vscode/mcp.json: github": {
            "allowedModels": [
                "copilot/gpt-5-mini",
                "copilot/auto",
                "copilot/claude-haiku-4.5",
                "copilot/claude-opus-41",
                "copilot/claude-opus-4.5",
                "copilot/claude-sonnet-4",
                "copilot/claude-sonnet-4.5",
                "gemini/models/gemini-2.5-flash",
                "gemini/models/gemini-2.5-pro",
                "copilot/gemini-2.5-pro",
                "copilot/gemini-3-flash-preview",
                "copilot/gemini-3-pro-preview",
                "copilot/gpt-4.1",
                "copilot/gpt-4o",
                "copilot/gpt-4o-mini",
                "copilot/gpt-5",
                "copilot/gpt-5-codex",
                "copilot/gpt-5.1",
                "copilot/gpt-5.1-codex",
                "copilot/gpt-5.1-codex-max",
                "copilot/gpt-5.1-codex-mini",
                "copilot/gpt-5.2",
                "copilot/grok-code-fast-1",
                "copilot/oswe-vscode-prime"
            ]
        }
    },
    "workbench.editor.enablePreviewFromQuickOpen": true,
    "workbench.editor.enablePreviewFromCodeNavigation": true,

    // === COPILOT CONTEXT ===
    // Canonical instructions live in `.github/copilot-instructions.md` (SSOT).
    // Execution contract and shell rules provide explicit invariants.
    "github.copilot.chat.contextFiles": [
        ".github/copilot-instructions.md",
        "docs/EXECUTION_CONTRACT.md",
        "docs/PWSH_RULES.md"
    ],

    // Prefer MCP servers for context enrichment
    "github.copilot.chat.useProjectContext": true,
    "workbench.experimental.cloudChanges.partialMatches.enabled": true,
    "chat.todoListTool.descriptionField": true,
    "claudeCode.allowDangerouslySkipPermissions": true,
    "claudeCode.useTerminal": false,
    "claudeCode.selectedModel": "claude-sonnet-4-5",
    "claudeCode.respectGitIgnore": false,
    "claudeCode.initialPermissionMode": "plan",
    "claudeCode.preferredLocation": "sidebar",
    "chat.todoListTool.writeOnly": true,
    "github.copilot.chat.newWorkspace.useContext7": false,
    "chat.useAgentSkills": true,
    "editor.experimental.asyncTokenization": false,
    "github.copilot.chat.codeGeneration.useInstructionFiles": false,
    "chat.useAgentsMdFile": false,
    "github.copilot.chat.customInstructionsInSystemMessage": false,
    "@azure.enableAutoSetAzureRules": false,
    "chat.instructionsFilesLocations": {
        ".github/instructions": false
    }
}
