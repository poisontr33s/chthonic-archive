{
  "description": "Golden test vectors for preflight_execution_context MCP tool",
  "test_cases": [
    {
      "name": "windows_bun_clean_environment",
      "request": {
        "jsonrpc": "2.0",
        "id": 1,
        "method": "tools/call",
        "params": {
          "name": "preflight_execution_context",
          "arguments": {}
        }
      },
      "expected_response_shape": {
        "execution_abi": {
          "os": "windows",
          "platform": "win32",
          "shell": "pwsh",
          "runtime": "bun",
          "node_compat": true
        },
        "shell_sovereignty": {
          "status": "clean",
          "cross_shell_detected": false,
          "canonical_shell": "pwsh"
        },
        "permissions": {
          "repo_mutation": "unknown",
          "git_commit": "unknown",
          "git_push": "unknown"
        },
        "governance": {
          "shell_mismatch_retryable": false,
          "permission_required_before_narration": true,
          "structural_failures_non_retryable": true
        }
      }
    }
  ]
}
