(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[112],{295:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return m}});let s=a(4252)._(a(4232)),l=a(6581),r=[],c=[],n=!1;function i(e){let t=e(),a={loading:!0,loaded:null,error:null};return a.promise=t.then(e=>(a.loading=!1,a.loaded=e,e)).catch(e=>{throw a.loading=!1,a.error=e,e}),a}class d{promise(){return this._res.promise}retry(){this._clearTimeouts(),this._res=this._loadFn(this._opts.loader),this._state={pastDelay:!1,timedOut:!1};let{_res:e,_opts:t}=this;e.loading&&("number"==typeof t.delay&&(0===t.delay?this._state.pastDelay=!0:this._delay=setTimeout(()=>{this._update({pastDelay:!0})},t.delay)),"number"==typeof t.timeout&&(this._timeout=setTimeout(()=>{this._update({timedOut:!0})},t.timeout))),this._res.promise.then(()=>{this._update({}),this._clearTimeouts()}).catch(e=>{this._update({}),this._clearTimeouts()}),this._update({})}_update(e){this._state={...this._state,error:this._res.error,loaded:this._res.loaded,loading:this._res.loading,...e},this._callbacks.forEach(e=>e())}_clearTimeouts(){clearTimeout(this._delay),clearTimeout(this._timeout)}getCurrentValue(){return this._state}subscribe(e){return this._callbacks.add(e),()=>{this._callbacks.delete(e)}}constructor(e,t){this._loadFn=e,this._opts=t,this._callbacks=new Set,this._delay=null,this._timeout=null,this.retry()}}function o(e){return function(e,t){let a=Object.assign({loader:null,loading:null,delay:200,timeout:null,webpack:null,modules:null},t),r=null;function i(){if(!r){let t=new d(e,a);r={getCurrentValue:t.getCurrentValue.bind(t),subscribe:t.subscribe.bind(t),retry:t.retry.bind(t),promise:t.promise.bind(t)}}return r.promise()}if(!n){let e=a.webpack&&1?a.webpack():a.modules;e&&c.push(t=>{for(let a of e)if(t.includes(a))return i()})}function o(e,t){i();let c=s.default.useContext(l.LoadableContext);c&&Array.isArray(a.modules)&&a.modules.forEach(e=>{c(e)});let n=s.default.useSyncExternalStore(r.subscribe,r.getCurrentValue,r.getCurrentValue);return s.default.useImperativeHandle(t,()=>({retry:r.retry}),[]),s.default.useMemo(()=>{var t;return n.loading||n.error?s.default.createElement(a.loading,{isLoading:n.loading,pastDelay:n.pastDelay,timedOut:n.timedOut,error:n.error,retry:r.retry}):n.loaded?s.default.createElement((t=n.loaded)&&t.default?t.default:t,e):null},[e,n])}return o.preload=()=>i(),o.displayName="LoadableComponent",s.default.forwardRef(o)}(i,e)}function u(e,t){let a=[];for(;e.length;){let s=e.pop();a.push(s(t))}return Promise.all(a).then(()=>{if(e.length)return u(e,t)})}o.preloadAll=()=>new Promise((e,t)=>{u(r).then(e,t)}),o.preloadReady=e=>(void 0===e&&(e=[]),new Promise(t=>{let a=()=>(n=!0,t());u(c,e).then(a,a)})),window.__NEXT_PRELOADREADY=o.preloadReady;let m=o},2496:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var a in t)Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}(t,{default:function(){return n},noSSR:function(){return c}});let s=a(4252);a(7876),a(4232);let l=s._(a(295));function r(e){return{default:(null==e?void 0:e.default)||e}}function c(e,t){return delete t.webpack,delete t.modules,e(t)}function n(e,t){let a=l.default,s={loading:e=>{let{error:t,isLoading:a,pastDelay:s}=e;return null}};e instanceof Promise?s.loader=()=>e:"function"==typeof e?s.loader=e:"object"==typeof e&&(s={...s,...e});let n=(s={...s,...t}).loader;return(s.loadableGenerated&&(s={...s,...s.loadableGenerated},delete s.loadableGenerated),"boolean"!=typeof s.ssr||s.ssr)?a({...s,loader:()=>null!=n?n().then(r):Promise.resolve(r(()=>null))}):(delete s.webpack,delete s.modules,c(a,s))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},2896:(e,t,a)=>{"use strict";a.r(t),a.d(t,{__N_SSP:()=>m,default:()=>p});var s=a(7876),l=a(4232),r=a(8847),c=a.n(r);let n=c()(()=>a.e(614).then(a.bind(a,4614)),{loadableGenerated:{webpack:()=>[4614]},ssr:!1}),i=c()(()=>Promise.all([a.e(697),a.e(718),a.e(801)]).then(a.bind(a,1801)),{loadableGenerated:{webpack:()=>[1801]},ssr:!1}),d=c()(()=>Promise.all([a.e(697),a.e(718),a.e(44)]).then(a.bind(a,5044)),{loadableGenerated:{webpack:()=>[5044]},ssr:!1}),o=c()(()=>a.e(264).then(a.bind(a,1264)),{loadableGenerated:{webpack:()=>[1264]},ssr:!1}),u=c()(()=>Promise.all([a.e(697),a.e(718),a.e(890)]).then(a.bind(a,890)),{loadableGenerated:{webpack:()=>[890]},ssr:!1});var m=!0;function p(){let[e,t]=(0,l.useState)(null),[a,r]=(0,l.useState)(null),[c,m]=(0,l.useState)([]),[p,g]=(0,l.useState)(!0),[x,h]=(0,l.useState)(new Date().toISOString().split("T")[0]);return((0,l.useEffect)(()=>{(async()=>{g(!0);try{let[e,a,s]=await Promise.all([fetch("/api/cycles?limit=100"),fetch("/api/monitoring"),fetch("/api/metrics/history")]);if(!e.ok)throw Error("Failed to fetch cycles");let l=await e.json(),c=(Array.isArray(l)?l:l.data||[]).filter(e=>e.id.split("_")[0]===x.replace(/-/g,"")),n=c.reduce((e,t)=>e+t.generated,0),i=c.reduce((e,t)=>e+t.accepted,0),d=c.length>0?c.reduce((e,t)=>e+(t.p50_latency_ms||0),0)/c.length:0,o=c.length>0?c.reduce((e,t)=>e+(t.p95_latency_ms||0),0)/c.length:0;if(t({date:x,cycles:c,total_generated:n,total_accepted:i,avg_acceptance_rate:n>0?i/n*100:0,avg_p50_latency:d,avg_p95_latency:o}),a.ok){let e=await a.json();r(e)}if(s.ok){let e=await s.json();e.data&&Array.isArray(e.data)&&m(e.data)}}catch(e){console.error(e)}finally{g(!1)}})()},[x]),p)?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)("div",{className:"text-gray-400 text-xl",children:"Loading digest..."})}):(0,s.jsxs)("main",{className:"min-h-screen p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-100",children:"\uD83D\uDCC5 Daily Digest"}),(0,s.jsx)("p",{className:"text-gray-500 mt-1",children:"Aggregated cycle reports by date"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("input",{type:"date",value:x,onChange:e=>{h(e.target.value)},className:"bg-mas-dark border border-gray-700 rounded px-3 py-2 text-gray-100"}),(0,s.jsx)("a",{href:"/",className:"text-mas-highlight hover:underline",children:"← Dashboard"})]})]}),e&&e.cycles.length>0?(0,s.jsxs)(s.Fragment,{children:[a&&(0,s.jsxs)("div",{className:"card p-6 mb-8",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-100 flex items-center gap-2",children:"\uD83C\uDFAF Monitoring Score Artifact"}),(0,s.jsxs)("p",{className:"text-gray-500 text-sm mt-1",children:["From monitoring_score.json • Last ",a.window_hours||24,"h window"]})]}),(0,s.jsx)("div",{className:"text-right",children:(()=>{var e;let t=(e=a.quality_score)>=90?{icon:"✅",label:"Governance Compliant",className:"badge-success"}:e>=70?{icon:"⚠️",label:"Warning Zone",className:"badge-warning"}:e>=35?{icon:"\uD83D\uDCCA",label:"SLO Met",className:"badge-success"}:{icon:"\uD83D\uDEA8",label:"Below SLO",className:"badge-error"};return(0,s.jsxs)("span",{className:"".concat(t.className," flex items-center gap-1"),children:[(0,s.jsx)("span",{children:t.icon}),(0,s.jsx)("span",{children:t.label})]})})()})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[(0,s.jsxs)("div",{className:"bg-mas-dark/50 rounded-lg p-3 border border-gray-800",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Quality Score"}),(0,s.jsxs)("p",{className:"text-2xl font-bold ".concat(a.quality_score>=90?"text-green-400":a.quality_score>=70?"text-yellow-400":a.quality_score>=35?"text-green-400":"text-red-400"),children:[a.quality_score.toFixed(1),"%"]})]}),(0,s.jsxs)("div",{className:"bg-mas-dark/50 rounded-lg p-3 border border-gray-800",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Acceptance %"}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-gray-100",children:[a.acceptance_pct.toFixed(1),"%"]})]}),(0,s.jsxs)("div",{className:"bg-mas-dark/50 rounded-lg p-3 border border-gray-800",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"P50 Latency"}),(0,s.jsxs)("p",{className:"text-2xl font-bold ".concat(a.slo_compliance.p50_latency?"text-green-400":"text-red-400"),children:[a.latency_p50_ms.toFixed(2),"ms"]})]}),(0,s.jsxs)("div",{className:"bg-mas-dark/50 rounded-lg p-3 border border-gray-800",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"P95 Latency"}),(0,s.jsxs)("p",{className:"text-2xl font-bold ".concat(a.slo_compliance.p95_latency?"text-green-400":"text-red-400"),children:[a.latency_p95_ms.toFixed(2),"ms"]})]}),(0,s.jsxs)("div",{className:"bg-mas-dark/50 rounded-lg p-3 border border-gray-800",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Errors"}),(0,s.jsx)("p",{className:"text-2xl font-bold ".concat(0===a.error_count?"text-green-400":"text-red-400"),children:a.error_count})]}),(0,s.jsxs)("div",{className:"bg-mas-dark/50 rounded-lg p-3 border border-gray-800",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Timestamp"}),(0,s.jsx)("p",{className:"text-sm font-mono text-gray-300",children:new Date(a.timestamp).toLocaleTimeString()})]})]}),(0,s.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-800",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wide mb-2",children:"SLO Compliance"}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,s.jsxs)("span",{className:"badge ".concat(a.slo_compliance.acceptance_rate?"badge-success":"badge-error"),children:[a.slo_compliance.acceptance_rate?"✓":"✗"," Acceptance Rate"]}),(0,s.jsxs)("span",{className:"badge ".concat(a.slo_compliance.p50_latency?"badge-success":"badge-error"),children:[a.slo_compliance.p50_latency?"✓":"✗"," P50 Latency"]}),(0,s.jsxs)("span",{className:"badge ".concat(a.slo_compliance.p95_latency?"badge-success":"badge-error"),children:[a.slo_compliance.p95_latency?"✓":"✗"," P95 Latency"]}),(0,s.jsxs)("span",{className:"badge ".concat(a.slo_compliance.vram?"badge-success":"badge-error"),children:[a.slo_compliance.vram?"✓":"✗"," VRAM"]})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-8",children:[(0,s.jsx)(n,{title:"Cycles Today",value:e.cycles.length,status:"neutral"}),(0,s.jsx)(n,{title:"Generated",value:e.total_generated,status:"neutral"}),(0,s.jsx)(n,{title:"Accepted",value:e.total_accepted,status:"success"}),(0,s.jsx)(n,{title:"Avg Rate",value:"".concat(e.avg_acceptance_rate.toFixed(1),"%"),status:e.avg_acceptance_rate>=35?"success":"warning"}),(0,s.jsx)(n,{title:"Avg P50",value:"".concat(e.avg_p50_latency.toFixed(2),"ms"),status:e.avg_p50_latency<2?"success":"warning"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[(0,s.jsx)(i,{cycles:e.cycles}),(0,s.jsx)(d,{digest:{p50_latency_ms:e.avg_p50_latency,p95_latency_ms:e.avg_p95_latency,p99_latency_ms:1.2*e.avg_p95_latency}})]}),c.length>0&&(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsx)(u,{scores:c,title:"Historical Quality Score Trend",showLatency:!0})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h2",{className:"text-xl font-bold text-gray-100 mb-4",children:["Cycles on ",new Date(x).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),(0,s.jsx)(o,{cycles:e.cycles})]})]}):(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsxs)("p",{className:"text-gray-500 text-xl",children:["No cycles found for ",x]}),(0,s.jsx)("p",{className:"text-gray-600 mt-2",children:"Try selecting a different date."})]})]})}},6581:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"LoadableContext",{enumerable:!0,get:function(){return s}});let s=a(4252)._(a(4232)).default.createContext(null)},8508:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/digest",function(){return a(2896)}])},8847:(e,t,a)=>{e.exports=a(2496)}},e=>{e.O(0,[636,593,792],()=>e(e.s=8508)),_N_E=e.O()}]);